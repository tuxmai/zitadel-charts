zitadel:
  # The ZITADEL config under configmapConfig is written to a Kubernetes ConfigMap
  # See all defaults here:
  # https://github.com/zitadel/zitadel/blob/main/cmd/defaults.yaml
  configmapConfig:
    ExternalSecure: true
    ExternalDomain: "login.tuxmart.io"
    FirstInstance:
      Features:
        LoginV2:
          Required: true
        ConsoleUseV2UserApi: true
      Org:
        Human:
          # Username: 'admin@tuxmart.io' # Externalized to helmfile
          # Password: 'SuperSecret123!'  # Externalized to helmfile
    Database:
      Postgres:
        Host: "127.0.0.1" # Replace with your external PostgreSQL host
        Port: 5432
        Database: "zitadel"
        User:
          Username: "zitadel_user"
          SSL:
            Mode: "disable" # or "require", "verify-full"
        Admin:
          Username: "zitadel_admin"
          SSL:
            Mode: "disable"
    Console:
      Enabled: true

  # ZITADEL uses the masterkey for symmetric encryption.
  # Generate it with: tr -dc A-Za-z0-9 </dev/urandom | head -c 32
  masterkey: ""

# Image configuration
image:
  repository: ghcr.io/zitadel/zitadel
  tag: "v4.8.1" # Current appVersion of the chart

# Service configuration for MetalLB
service:
  type: LoadBalancer
  port: 8080
  annotations:
    # MetalLB static IP annotation
    metallb.universe.tf/loadBalancerIPs: "127.0.0.1" # Replace with your static IP

# Enable the new Login UI (V2)
login:
  enabled: true
  service:
    type: LoadBalancer
    annotations:
      # MetalLB static IP annotation for login UI
      metallb.universe.tf/loadBalancerIPs: "" # Managed via Helmfile
